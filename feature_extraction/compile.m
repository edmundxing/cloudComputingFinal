function [] = compile(indices)

clear mex;

kBuildFolder = './c++/build';
if (~exist(kBuildFolder, 'dir'))
  mkdir(kBuildFolder);
end;

if (~isempty(find(indices == 1, 1)))  
  mex ./c++/cnntrain_mex.cpp ...
      "./c++/sources/*.cpp" ...
      -I"./c++/include/" ...      
      -lut ...
      -outdir ./c++/build ...   
      -largeArrayDims ...
      COMPFLAGS="/openmp $COMPFLAGS" ...
      CXXFLAGS="\$CXXFLAGS -fopenmp" ...
      LDFLAGS="\$LDFLAGS -fopenmp";
  disp('cnntrain_mex compiled');  
end;
if (~isempty(find(indices == 2, 1)))
  mex ./c++/classify_mex.cpp ...
      "./c++/sources/*.cpp" ...
      -I"./c++/include/" ...      
      -lut ...
      -outdir ./c++/build ...   
      -largeArrayDims ...
      COMPFLAGS="/openmp $COMPFLAGS" ...
      CXXFLAGS="\$CXXFLAGS -fopenmp" ...
      LDFLAGS="\$LDFLAGS -fopenmp";
  disp('classify_mex compiled');
end;
if (~isempty(find(indices == 3, 1)))
  mex ./c++/genweights_mex.cpp ...
      "./c++/sources/*.cpp" ...
      -I"./c++/include/" ...      
      -lut ...
      -outdir ./c++/build ...   
      -largeArrayDims ...
      COMPFLAGS="/openmp $COMPFLAGS" ...
      CXXFLAGS="\$CXXFLAGS -fopenmp" ...
      LDFLAGS="\$LDFLAGS -fopenmp";
  disp('genweights_mex compiled');
end;

end